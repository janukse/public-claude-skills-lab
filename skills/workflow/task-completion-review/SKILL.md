---
name: task-completion-review
description: 지정된 문서에서 작업 항목을 추출하고, 코드베이스에서 실제 구현 완료 여부를 검증하여 리포트를 생성합니다.
argument-hint: "[문서 경로]"
---

# Task Completion Review

## 목적

작업 문서(PRD, TODO, 체크리스트, Plan 등)에 명시된 작업 항목을 추출하고, 코드베이스를 탐색하여 각 항목의 실제 구현 완료 여부를 판정하는 검증 워크플로우.

- 다양한 문서 형식(체크리스트, 번호 목록, 테이블, PRD 요구사항, Phase/Task 구조)의 작업 항목 자동 추출
- 코드베이스 탐색을 통한 각 작업 항목의 구현 완료 여부 객관적 판정
- 완료/미완료/부분완료 상태를 한눈에 파악할 수 있는 검토 리포트 생성
- 미완료 항목에 대한 후속 조치 안내

## 사용법

```
/task-completion-review docs/plan.md          # 특정 문서의 작업 항목 검증
/task-completion-review TODO.md               # TODO 파일 검증
/task-completion-review docs/prd.md           # PRD 요구사항 검증
```

### 옵션

| 옵션 | 설명 |
|------|------|
| `<문서 경로>` | 작업 항목이 포함된 문서 파일 경로 (필수) |

## Workflow

### Step 1: 대상 문서 읽기 및 형식 감지

인수로 받은 문서 파일을 읽고, 문서 형식을 자동 판별한다.

**지원하는 문서 형식:**

| 형식 | 감지 기준 | 예시 |
|------|-----------|------|
| 마크다운 체크리스트 | `- [ ]` / `- [x]` 패턴 | `- [ ] 로그인 기능 구현` |
| 번호 매긴 작업 목록 | `1.`, `2.` 등 번호 + 작업 설명 | `1. 사용자 인증 API 구현` |
| 테이블 형식 | 마크다운 테이블 내 작업/상태 컬럼 | `\| 작업 \| 상태 \|` |
| PRD 요구사항 | `## 요구사항`, `## Requirements` 등 섹션 하위 항목 | `### FR-001: 사용자 로그인` |
| Phase/Task 구조 | `## Phase N`, `### Task N` 패턴 | `## Phase 1: 기본 구조` |

**문서 형식 판별 규칙:**
1. 체크리스트 패턴(`- [ ]`, `- [x]`)이 3개 이상이면 **마크다운 체크리스트**
2. Phase/Task 패턴이 있으면 **Phase/Task 구조**
3. 요구사항 섹션 헤딩(`Requirements`, `요구사항`, `기능 명세`)이 있으면 **PRD 요구사항**
4. 작업/상태 컬럼이 있는 테이블이 있으면 **테이블 형식**
5. 번호 매긴 항목이 3개 이상이면 **번호 매긴 작업 목록**
6. 어느 형식에도 해당하지 않으면 "지원하는 작업 문서 형식을 감지하지 못했습니다."를 출력하고 종료

감지된 형식을 표시한다:

```markdown
| 항목 | 값 |
|------|-----|
| 문서 | docs/plan.md |
| 감지된 형식 | 마크다운 체크리스트 |
| 추출 대상 항목 수 | 12 |
```

**파일이 존재하지 않으면** "파일을 찾을 수 없습니다: `<경로>`"를 출력하고 즉시 종료한다.

### Step 2: 작업 항목 추출

감지된 문서 형식에 맞는 패턴으로 작업 항목을 추출한다.

#### 형식별 추출 규칙

**마크다운 체크리스트:**
- `- [ ] <작업 내용>` -> 미완료 항목으로 추출
- `- [x] <작업 내용>` -> 문서상 완료 표기 항목으로 추출
- 중첩된 하위 항목도 부모 항목에 포함하여 추출

**번호 매긴 작업 목록:**
- `N. <작업 내용>` 패턴으로 추출
- 하위 번호(1.1, 1.2 등)가 있으면 상위 항목의 하위 작업으로 추출

**테이블 형식:**
- 테이블의 작업/항목 컬럼에서 작업명 추출
- 상태 컬럼이 있으면 문서상 상태도 함께 추출

**PRD 요구사항:**
- 요구사항 섹션 내의 각 항목(헤딩, 불릿 포인트)을 추출
- 요구사항 ID가 있으면 함께 추출 (예: `FR-001`, `REQ-01`)

**Phase/Task 구조:**
- Phase 헤딩 아래의 각 Task를 추출
- Quality Gate 조건이 있으면 함께 추출

#### 추출 결과 표시

추출된 항목을 테이블로 표시한다:

```markdown
| # | 작업 항목 | 문서상 상태 | 비고 |
|---|-----------|-------------|------|
| 1 | 사용자 인증 API 구현 | 완료 | - |
| 2 | 로그인 페이지 UI | 미완료 | - |
| 3 | 비밀번호 재설정 기능 | - | 하위 작업 2개 포함 |
```

**추출된 항목이 없으면** "문서에서 작업 항목을 추출하지 못했습니다."를 출력하고 종료한다.

### Step 3: 완료 여부 검증

각 추출된 작업 항목에 대해 코드베이스를 탐색하여 실제 구현 완료 여부를 판정한다.

#### 검증 방법

각 작업 항목에서 **핵심 키워드**를 추출하고, 다음 순서로 코드베이스를 탐색한다:

1. **파일 탐색**: Glob 도구로 작업 항목과 관련된 파일명/디렉토리 검색
2. **코드 탐색**: Grep 도구로 핵심 키워드(함수명, 클래스명, API 경로, 컴포넌트명 등) 검색
3. **테스트 탐색**: 관련 테스트 파일 존재 여부 확인
4. **설정 탐색**: 필요한 설정(라우트, 미들웨어 등록 등)이 반영되었는지 확인

#### 판정 기준

| 판정 | 조건 |
|------|------|
| **완료** | 핵심 기능 코드가 존재하고, 주요 로직이 구현되어 있음 |
| **부분완료** | 관련 코드가 존재하나, 일부 기능이 미구현이거나 TODO/FIXME 주석이 남아있음 |
| **미완료** | 관련 코드를 찾을 수 없거나, 스텁/플레이스홀더만 존재 |

#### 판정 근거 수집

각 항목에 대해 판정 근거를 기록한다:
- **완료**: 구현된 파일 경로와 핵심 코드 위치
- **부분완료**: 구현된 부분과 미구현 부분 명시
- **미완료**: 탐색 범위와 미발견 사유

### Step 4: 검토 리포트 생성

검증 결과를 종합하여 리포트를 출력한다.

```markdown
## 작업 완료 검토 리포트

### 검토 요약

| 항목 | 값 |
|------|-----|
| 문서 | docs/plan.md |
| 문서 형식 | 마크다운 체크리스트 |
| 전체 작업 항목 | 12개 |
| 완료 | 8개 |
| 부분완료 | 2개 |
| 미완료 | 2개 |
| 완료율 | 66.7% (8/12) |

### 항목별 상세

| # | 작업 항목 | 판정 | 근거 |
|---|-----------|------|------|
| 1 | 사용자 인증 API 구현 | 완료 | `src/auth/auth.controller.ts`, `src/auth/auth.service.ts` 구현 확인 |
| 2 | 로그인 페이지 UI | 완료 | `src/pages/Login.tsx` 컴포넌트 구현 확인 |
| 3 | 비밀번호 재설정 기능 | 부분완료 | `src/auth/reset.service.ts` 존재하나 이메일 발송 로직 미구현 (TODO 주석) |
| 4 | 관리자 대시보드 | 미완료 | `src/pages/admin/` 디렉토리 미존재, 관련 라우트 미등록 |

### 미완료/부분완료 항목 상세

#### #3 비밀번호 재설정 기능 (부분완료)

**구현된 부분:**
- `src/auth/reset.service.ts` — 토큰 생성 및 검증 로직
- `src/auth/reset.controller.ts` — API 엔드포인트

**미구현 부분:**
- 이메일 발송 로직 (`// TODO: implement email sending` at line 42)
- 비밀번호 변경 확인 페이지

#### #4 관리자 대시보드 (미완료)

**탐색 범위:**
- `src/pages/admin/` — 디렉토리 미존재
- `admin`, `dashboard` 키워드 — 관련 코드 미발견
- 라우트 설정 — admin 라우트 미등록
```

### Step 5: 사용자 확인

리포트 출력 후 `AskUserQuestion`으로 후속 조치를 확인한다:

- "미완료 항목 작업 시작" -- 미완료 항목 중 하나를 선택하여 구현 시작
- "문서 상태 업데이트" -- 검증 결과를 반영하여 원본 문서의 체크리스트/상태를 갱신
- "리포트 저장" -- 검토 리포트를 별도 파일로 저장
- "종료" -- 리포트 확인만 하고 종료

**"문서 상태 업데이트" 선택 시:**
- 검증 결과를 기반으로 원본 문서의 체크박스, 상태 컬럼 등을 갱신
- 변경 전/후를 diff로 표시하고, `AskUserQuestion`으로 적용 여부를 최종 확인

## 문서 형식별 참조

### 체크리스트 문서 예시

```markdown
## TODO
- [x] 프로젝트 초기 설정
- [ ] 사용자 인증 구현
  - [x] 로그인 API
  - [ ] 회원가입 API
- [ ] 관리자 페이지
```

### PRD 요구사항 예시

```markdown
## 요구사항

### FR-001: 사용자 로그인
사용자는 이메일과 비밀번호로 로그인할 수 있어야 한다.

### FR-002: 소셜 로그인
사용자는 Google, GitHub 계정으로 로그인할 수 있어야 한다.
```

### Phase/Task 구조 예시

```markdown
## Phase 1: 기본 구조
### Task 1.1: 프로젝트 스캐폴딩
### Task 1.2: DB 스키마 설계

## Phase 2: 핵심 기능
### Task 2.1: 인증 시스템
```

## 예외사항

### 파일 미존재
인수로 지정한 파일이 존재하지 않으면 "파일을 찾을 수 없습니다: `<경로>`"를 출력하고 종료한다.

### 지원하지 않는 형식
작업 항목 패턴을 감지하지 못하면 "지원하는 작업 문서 형식을 감지하지 못했습니다."를 출력하고 종료한다.

### 인수 누락
문서 경로 인수가 없으면 "검토할 문서 경로를 지정해주세요. 예: `/task-completion-review docs/plan.md`"를 출력하고 종료한다.

### 비-마크다운 파일
`.md` 이외의 파일이 지정되면 텍스트로 읽되, 작업 항목 패턴 감지에 실패하면 지원하지 않는 형식 예외로 처리한다.

### 대규모 문서
추출된 작업 항목이 50개를 초과하면, 항목 목록을 표시하고 `AskUserQuestion`으로 전체 검증 진행 여부를 확인한다.

## Related Files

이 스킬은 단일 파일(`SKILL.md`)로 구성되며, 외부 의존성이 없습니다.
인수로 지정된 작업 문서와 프로젝트의 코드베이스를 대상으로 동작합니다.
